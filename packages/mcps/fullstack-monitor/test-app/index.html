<!DOCTYPE html>
<html>
<head>
    <title>MCP Demo App</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        button:hover { background: #005a8b; }
        #result { margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
        .error { border-color: #ff4444; background: #ffeeee; }
        .success { border-color: #44aa44; background: #eeffee; }
    </style>
</head>
<body>
    <h1>MCP Full-Stack Monitor Demo</h1>
    <p>This is a test application for demonstrating MCP monitoring capabilities.</p>
    
    <button id="test-button" onclick="testAPI()">Test API Call</button>
    <button id="error-button" onclick="testError()">Test Error</button>
    
    <div id="result"></div>
    
    <script>
        console.log('Demo app loaded for MCP testing');
        
        async function testAPI() {
            console.log('Testing API call...');
            const result = document.getElementById('result');
            result.textContent = 'Making API call...';
            result.className = '';
            
            try {
                const response = await fetch('http://localhost:3007/api/test');
                const data = await response.json();
                
                result.innerHTML = `<h3>✅ API Success</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
                result.className = 'success';
                console.log('API call successful:', data);
            } catch (error) {
                result.innerHTML = `<h3>❌ API Error</h3><p>${error.message}</p>`;
                result.className = 'error';
                console.error('API call failed:', error);
            }
        }
        
        async function testError() {
            console.log('Testing error endpoint...');
            const result = document.getElementById('result');
            result.textContent = 'Testing error handling...';
            result.className = '';
            
            try {
                const response = await fetch('http://localhost:3007/api/error');
                const data = await response.json();
                
                result.innerHTML = `<h3>⚠️ Expected Error Response</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
                result.className = 'error';
                console.log('Error response received:', data);
            } catch (error) {
                result.innerHTML = `<h3>❌ Network Error</h3><p>${error.message}</p>`;
                result.className = 'error';
                console.error('Network error:', error);
            }
        }
        
        // Log page interactions for monitoring
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                console.log('Button clicked:', e.target.textContent);
            }
        });
    </script>
</body>
</html>