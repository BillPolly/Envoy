{
  "type": "sequence",
  "id": "complete-webapp-workflow",
  "description": "Complete workflow to generate, build, run, test, and visually validate a web application",
  "children": [
    {
      "type": "sequence",
      "id": "webapp-generation",
      "description": "Generate complete web application structure",
      "children": [
        {
          "type": "action",
          "id": "generate-package-json",
          "tool": "packageJsonGenerator",
          "params": {
            "appName": "MyWebApp",
            "version": "1.0.0",
            "description": "Generated web application with BT framework",
            "author": "BT Framework",
            "buildTool": "vite",
            "includeScripts": true,
            "additionalDeps": ["axios"],
            "additionalDevDeps": ["@testing-library/user-event", "puppeteer"]
          }
        },
        {
          "type": "action",
          "id": "generate-html",
          "tool": "htmlGenerator",
          "params": {
            "appName": "MyWebApp",
            "title": "My Generated Web App",
            "description": "A beautiful web application generated with BT Framework",
            "theme": "light"
          }
        },
        {
          "type": "action",
          "id": "generate-css",
          "tool": "cssGenerator",
          "params": {
            "appName": "MyWebApp",
            "fileName": "main.css",
            "theme": "modern",
            "colorScheme": "blue",
            "includeReset": true,
            "includeUtilities": true
          }
        },
        {
          "type": "action",
          "id": "generate-main-entry",
          "tool": "mainEntryGenerator",
          "params": {
            "appName": "MyWebApp",
            "framework": "react",
            "entryPoint": "main.jsx",
            "rootComponent": "App"
          }
        },
        {
          "type": "action",
          "id": "generate-hero-component",
          "tool": "reactComponentGenerator",
          "params": {
            "appName": "MyWebApp",
            "componentName": "Hero",
            "componentType": "functional",
            "props": [
              {"name": "title", "type": "string"},
              {"name": "subtitle", "type": "string"}
            ],
            "hooks": ["useState"],
            "styling": "css",
            "includeTests": true
          }
        },
        {
          "type": "action",
          "id": "generate-card-component",
          "tool": "reactComponentGenerator",
          "params": {
            "appName": "MyWebApp",
            "componentName": "Card",
            "componentType": "functional",
            "props": [
              {"name": "title", "type": "string"},
              {"name": "content", "type": "string"},
              {"name": "imageUrl", "type": "string"}
            ],
            "hooks": ["useState"],
            "styling": "css",
            "includeTests": true
          }
        }
      ]
    },
    {
      "type": "sequence",
      "id": "build-and-install",
      "description": "Install dependencies and build the application",
      "children": [
        {
          "type": "retry",
          "maxAttempts": 3,
          "retryDelay": 2000,
          "child": {
            "type": "action",
            "id": "install-dependencies",
            "tool": "npmInstaller",
            "params": {
              "packageManager": "npm",
              "forceClean": true,
              "timeout": 300000
            }
          }
        },
        {
          "type": "action",
          "id": "build-app",
          "tool": "buildRunner",
          "params": {
            "command": "build",
            "packageManager": "npm",
            "timeout": 120000
          }
        }
      ]
    },
    {
      "type": "sequence",
      "id": "server-and-testing",
      "description": "Start development server and run comprehensive tests",
      "children": [
        {
          "type": "action",
          "id": "find-available-port",
          "tool": "portManager",
          "params": {
            "action": "find",
            "startPort": 3000,
            "endPort": 3100
          }
        },
        {
          "type": "action",
          "id": "start-dev-server",
          "tool": "serverManager",
          "params": {
            "action": "start",
            "command": "dev",
            "port": "${find-available-port.port}",
            "packageManager": "npm",
            "serverName": "webapp-server",
            "detached": true,
            "waitForReady": true,
            "readyTimeout": 30000
          }
        },
        {
          "type": "action",
          "id": "launch-test-browser",
          "tool": "browserManager",
          "params": {
            "action": "launch",
            "browserName": "webapp-tester",
            "headless": true,
            "viewport": {"width": 1280, "height": 720},
            "devtools": false,
            "slowMo": 0
          }
        },
        {
          "type": "action",
          "id": "take-initial-screenshot",
          "tool": "screenshotCapture",
          "params": {
            "url": "http://localhost:${find-available-port.port}",
            "browserName": "webapp-tester",
            "type": "fullPage",
            "fileName": "initial-webapp.png",
            "waitFor": 2000
          }
        },
        {
          "type": "action",
          "id": "test-basic-interactions",
          "tool": "interactionTester",
          "params": {
            "url": "http://localhost:${find-available-port.port}",
            "browserName": "webapp-tester",
            "interactions": [
              {"type": "wait", "timeout": 1000},
              {"type": "scroll", "x": 0, "y": 200},
              {"type": "wait", "timeout": 500},
              {"type": "scroll", "x": 0, "y": 0},
              {"type": "wait", "timeout": 500}
            ],
            "recordSteps": true,
            "screenshotAfterEach": true
          }
        },
        {
          "type": "action",
          "id": "measure-performance",
          "tool": "performanceTester",
          "params": {
            "url": "http://localhost:${find-available-port.port}",
            "browserName": "webapp-tester",
            "metrics": ["FCP", "LCP", "CLS", "FID", "TTFB"],
            "runs": 2,
            "waitTime": 2000
          }
        },
        {
          "type": "action",
          "id": "create-baseline-screenshot",
          "tool": "visualRegressionTester",
          "params": {
            "url": "http://localhost:${find-available-port.port}",
            "browserName": "webapp-tester",
            "generateBaseline": true
          }
        }
      ]
    },
    {
      "type": "sequence",
      "id": "cleanup",
      "description": "Clean up resources",
      "children": [
        {
          "type": "action",
          "id": "close-browser",
          "tool": "browserManager",
          "params": {
            "action": "close",
            "browserName": "webapp-tester"
          }
        },
        {
          "type": "action",
          "id": "stop-server",
          "tool": "serverManager",
          "params": {
            "action": "stop",
            "serverName": "webapp-server"
          }
        }
      ]
    }
  ]
}